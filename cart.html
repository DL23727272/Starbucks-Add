<!DOCTYPE html>
<html>
  <head>
    <title>Cart</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"rel="stylesheet"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="icon" type="image/x-icon" href="/img/logo.ico">

    <!-- Alertify sakit sa ulo -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>

    <script src="jquery-3.6.1.js"></script>
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

      <!--
        You may not copy, reproduce, distribute, publish, display, perform, modify, create derivative works, transmit, 
        or in any way exploit any such content, nor may you distribute any part of this content over any network, including a local area network, 
        sell or offer it for sale, or use such content to construct any kind of database. You may not alter or remove any copyright or 
        other notice from copies of the content on AI Tech’s website. 
      -->
  </head>
  <body class="">
    <nav
      class="navbar navbar-expand-lg shadow-lg"
      style="background-color: #006341"
    >
      <div
        class="container-sm d-flex justify-content-between"
        style="width: 100%"
      >
        <div
          class="d-flex justify-content-between align-items-center"
          style="width: 100vw"
        >
          <div>
            <img src="./img/logo.png" alt="" style="width: 100px" />
          </div>
          <div>
            <a href="#displayProducts"
              ><button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
              >
                <i class="fa-solid fa-mug-hot" style="color: white"></i></button
            ></a>
          </div>
        </div>

        <div
          class="collapse navbar-collapse container-fluid"
          id="navbarSupportedContent"
          style="width: 30vw"
        >
          <ul class="navbar-nav mb-2 mb-lg-0">
            <li class="nav-item">
              <a
                class="nav-link  text-white fw-lighter"
                aria-current="page"
                href="index.html"
              >
                Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-white fw-lighter" href="index.html#displayProducts">Product</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active text-white fw-lighter" href="cart.html"> Cart</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!--Cart-->
    <section class="container-sm mt-5">
      <h2>Your Cart</h2>
      <span id="cartStatus" class="lead badge text-bg-warning">
        Please select a product</span
      >

      <table class="table">
        <thead>
          <tr>
            <th>Product Name</th>
            <th>Quantity</th>
            <th>Total</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="cartTableBody"></tbody>
      </table>
      <div class="row">
        <div class="col-md-6 px-4">
            <h5>Total Amount: <span id="totalAmount">₱0.00</span></h5>
        </div>
        <!-- <div class="col-md-6 text-end">
            <button class="btn btn-primary" onclick="placeOrder()">Place Order</button>
        </div> -->
    </div>
    </section>
    <!---end Cart-->

    <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />

    <!--Hero-->
    <section class="container-sm">
      <div class="d-flex flex-column align-items-center text-center">
        <img
          src="./img/hero.png"
          style="width: 200px; height: 45px"
          alt=""
          class="mt-5 mb-3 img-fluid"
          srcset=""
        />
        <p class="w-75 lead text-secondary fst-italic">
          Starbucks is more than just a coffee shop; it's a community hub where
          people connect over delicious drinks and meaningful moments. With our
          expertly crafted coffees, teas, and snacks, every visit is an
          opportunity to treat yourself to quality and comfort. From our iconic
          lattes to seasonal favorites, there's something for every palate. Join
          us at Starbucks and let's make every sip count.
        </p>
      </div>
    </section>


      <!--
        You may not copy, reproduce, distribute, publish, display, perform, modify, create derivative works, transmit, 
        or in any way exploit any such content, nor may you distribute any part of this content over any network, including a local area network, 
        sell or offer it for sale, or use such content to construct any kind of database. You may not alter or remove any copyright or 
        other notice from copies of the content on AI Tech’s website. 
      -->

    <footer class="mt-auto text-white p-3" style="background-color: #006341">
      <div
        class="container-sm d-flex justify-content-between align-items-center"
      >
        <div class="">
          <h4>AI Tech</h4>
          <ul>
            <li>Shanne Cabotaje</li>
            <li>Dran Leynard Gamoso</li>
            <li>Mark Jeriel Cabalbag</li>
            <li>Ruvic Bacton</li>
            <li>Cyrell Corrales</li>
            <li>Jared Ellasos</li>
          </ul>
        </div>
        <div class="">
          <div>
            <img src="./img/top.png" style="width: 50px; height: 50px" alt="" />
          </div>
          <div><p class="fst-bold">&copy; 2024; Bebekels</p></div>
        </div>
      </div>
    </footer>

    

    <script type="text/javascript">

       alertify.set('notifier', 'position', 'top-right');
       alertify.set('notifier', 'delay', 5);

        document.addEventListener("DOMContentLoaded", function () {
            const displayCartItems = () => {
                var cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

                var cartTableBody = document.getElementById("cartTableBody");
                var cartStatus = document.getElementById("cartStatus");
                var totalAmountElement = document.getElementById("totalAmount");

                cartTableBody.innerHTML = "";
                var totalAmount = 0;

                // Iterate through each cart item and append to the table
                cartItems.forEach(function (item, index) {
                    // Handle null or undefined total values
                    var total = item.total || 0;

                    if (cartItems.length === 0) {
                        cartStatus.style.display = "block";
                    } else {
                        cartStatus.style.display = "none";
                        var row = "<tr>" +
                            "<td>" + item.productName + "</td>" +
                            "<td>" + item.quantity + "</td>" +
                            "<td>" + total.toFixed(2) + "</td>" +
                            "<td><button class='btn btn-outline-danger cancel-btn' onclick='cancelItem(" + index + ")'>Cancel</button></td>" +
                            "</tr>";

                        // Append the row to the table body
                        cartTableBody.innerHTML += row;

                        // Update the totalAmount variable with the current item's total
                        totalAmount += total;
                    }
                });

                // Update the total amount displayed on the page
                document.getElementById("totalAmount").innerText = "₱" + totalAmount.toFixed(2);
            };

            // Call the displayCartItems function when the page loads
            displayCartItems();
        });

        function cancelItem(index) {
          alertify.success('Item canceled successfully!');
          // Retrieve the cart items from localStorage
          var cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
          setTimeout(function () {
              location.reload();
            }, 1000);

          // Check if the index is valid
          if (index >= 0 && index < cartItems.length) {
            // Remove the item at the specified index from the array
            cartItems.splice(index, 1);
            // Update localStorage with the modified cartItems array
            localStorage.setItem("cartItems", JSON.stringify(cartItems));
            // Call the function to refresh the displayed cart items
            displayCartItems();
           
          } else {
            // Show an error message if the index is out of bounds
            alertify.error('Invalid index for canceling item!');
          }
        }
        /*
            You may not copy, reproduce, distribute, publish, display, perform, modify, create derivative works, transmit, 
            or in any way exploit any such content, nor may you distribute any part of this content over any network, including a local area network, 
            sell or offer it for sale, or use such content to construct any kind of database. You may not alter or remove any copyright or 
            other notice from copies of the content on AI Tech’s website. 
          */
       
    </script>
    
  </body>
</html>
