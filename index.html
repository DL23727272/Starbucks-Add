<!DOCTYPE html>
<html>
  <head>
    <title>Home</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Alertify sakit sa ulo -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>

    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
    <link rel="icon" type="image/x-icon" href="/img/logo.ico">
      <!--
        You may not copy, reproduce, distribute, publish, display, perform, modify, create derivative works, transmit, 
        or in any way exploit any such content, nor may you distribute any part of this content over any network, including a local area network, 
        sell or offer it for sale, or use such content to construct any kind of database. You may not alter or remove any copyright or 
        other notice from copies of the content on AI Techâ€™s website. 
      -->
    <style>
      .thumb {
        display: flex;
        margin-top: -60px;
        justify-content: center;
      }
      .thumb a:hover {
        margin-top: -15px;
        transition: 0.2s;
      }
      .thumb img {
        width: 54px;
        margin: 20px;
      }
      .navbar {
        background-color: #006341; 
        transition: background-color 0.3s ease; 
      }
      .navbar.blurred {
        background-color: transparent; /* aalisin niya yung background color */
        backdrop-filter: blur(20px); /* then eto papalit, blur effect */
      }
      .nav-link {
        color: white;
        font-weight: 500;
        transition: color 0.3s ease 
      }
      .nav-link.scrolled {
        color: #000000;
        font-weight: 500;
      }
      .nav-link.scrolled:hover {
        color: #006341; 
        font-weight: 500;
      }
      #mugIcon {
        color: white;
        transition: color 0.3s ease; /* Smooth transition effect for icon color */
      }
      
      #mugIcon.scrolled {
        color: #000000; /* Change icon color when scrolled */
      }
    </style>
  </head>
  <body class="">

    <!--Navbar-->
    <nav class="navbar navbar-expand-lg shadow-lg sticky-top" id="navbar">
      <div class="container-sm d-flex justify-content-between" style="width: 100%">

        <div class="d-flex justify-content-between align-items-center" style="width: 100vw">
          <div>
            <img src="./img/logo.png" alt="" style="width: 100px" />
          </div>
          <div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent">
              <i class="fa-solid fa-mug-hot" id="mugIcon"></i>
            </button>
          </div>
        </div>
    
        <div class="collapse navbar-collapse container-fluid" id="navbarSupportedContent" style="width: 30vw">
          <ul class="navbar-nav mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link " aria-current="page" href="#">
                Home
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link  " href="#content">
                Product
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link " href="cart.html">
                Cart
              </a>
            </li>
          </ul>
        </div>

      </div>
    </nav>
    <!--End ti Navbar -->

    <!-- MODAL ADD ITEMS -->
    <div id="modalContainer"></div>
    <!-- END MODAL ADD ITEMSSSSSSSS -->

    
    <!--Banner-->
    <div>
      <div class="position-relative">
        <img
          src="./img/banner.jpg"
          class="w-100 img-fluid"
          style="
            height: 50vh;
            object-fit: cover;
            filter: blur(2px);
            filter: saturate(2);
          "
        />
        <section
          class="position-absolute top-50 start-50 translate-middle text-center text-white"
        >
          <h1 class="text-white h1">Starbucks</h1>
          <p class="lead fst-italic h4">
            <i class="fa-solid fa-quote-left"></i> Find Your Perfect Sip at
            Starbucks! <i class="fa-solid fa-quote-right"></i>
          </p>
          <button
            class="btn text-white shadow"
            style="background-color: #006341"
          >
            <a href="#content" style="text-decoration: none; color: white;">
              <i class="fa-solid fa-mug-hot"></i> Order Now
            </a>
          </button>
        </section>
      </div>
    </div>
    <!--End Banner-->

    <!---Carousel-->
    
    <div class="container-sm mt-5 my-5 text-center">
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-sm-12 col-md-4 mx-auto">
                <img src="img/img1.png" alt="" class="starbucks img-fluid" style="width: 300px; height: 400px; filter: drop-shadow(11px 13px 9px #000000); 
            -webkit-filter: drop-shadow(11px 13px 9px #000000); -moz-filter: drop-shadow(11px 13px 9px #000000);" />
            </div>
            <div class="col-md-4"></div>
        </div>
    </div>
  
    <br>
  
    <div class="container mt-5">
      <div class="row">
        <div class="col-md-4">
        </div>
  
        <div class="col-md-4">
          <div class="thumb">
            <a href="index.html#content">
              <img id="bottom" src="img/thumb1.png" onmouseover="imgSlider('img/img1.png');"/>
            </a>
            <a href="index.html#content">
              <img src="img/thumb2.png" onmouseover="imgSlider('img/img2.png');"/>
            </a>
            <a href="index.html#content">
              <img src="img/thumb3.png" onmouseover="imgSlider('img/img3.png');" />
            </a>
          </div>
        </div>
  
        <div class="col-md-4">
        </div>
      </div>
    </div>
    <!--End Carousel-->
  
    <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />

    <!--Hero-->
    <section class="container-sm">
      <div class="d-flex flex-column align-items-center text-center">
        <img
          src="./img/hero.png"
          style="width: 200px; height: 45px"
          alt=""
          class="mt-5 mb-3 img-fluid"
          srcset=""
        />
        <p class="w-75 lead text-secondary fst-italic">
          Starbucks is more than just a coffee shop; it's a community hub where
          people connect over delicious drinks and meaningful moments. With our
          expertly crafted coffees, teas, and snacks, every visit is an
          opportunity to treat yourself to quality and comfort. From our iconic
          lattes to seasonal favorites, there's something for every palate. Join
          us at Starbucks and let's make every sip count.
        </p>
        <a class="nav-link" data-bs-toggle="modal" data-bs-target="#addProduct"> 
        <button class="btn btn-outline-success" >Add Product</button>
        </a>
      </div>
    </section>
    <!-- End Hero-->

    <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />

    <section class="">
      <div class="container-sm">
        <div
          class="d-flex gap-3 overflow-x-scroll w-100"
          id="content"
        ></div>
      </div>
    </section>
    
    
    <!---Footer-->
    <footer class="mt-5 text-white p-3" style="background-color: #006341;">
      <div class="container-sm d-flex justify-content-between align-items-center">
        <div class="">
          <h4>AI Tech</h4>
          <ul>
            <li>Shanne Cabotaje</li>
            <li>Dran Leynard Gamoso</li>
            <li>Mark Jeriel Cabalbag</li>
            <li>Ruvic Bacton</li>
            <li>Cyrell Corrales</li>
            <li>Jared Ellasos</li>
          </ul>
        </div>
        <div class="">
          <div>
            <img src="./img/top.png" style="width: 50px; height: 50px;" alt="">
          </div>
          <div>
            <p class="fst-bold">&copy; 2024; Bebekels</p>
          </div>
        </div>
      </div>
    </footer>

     <!---End Footer-->
      <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
      <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script type="text/javascript">
        //For navbar
        window.onscroll = function () { scrollFunction() };

        function scrollFunction() {
          if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
            document.getElementById("navbar").classList.add("blurred");
            const navLinks = document.querySelectorAll(".nav-link");
            navLinks.forEach(link => link.classList.add("scrolled"));
            document.getElementById("mugIcon").classList.add("scrolled"); // Add scrolled class to the icon
          } else {
            document.getElementById("navbar").classList.remove("blurred");
            const navLinks = document.querySelectorAll(".nav-link");
            navLinks.forEach(link => link.classList.remove("scrolled"));
            document.getElementById("mugIcon").classList.remove("scrolled"); // Remove scrolled class from the icon
          }
        }
        //end of function for navbarrr
      
        // For carousel na nag chachange image
        function imgSlider(anything){
          document.querySelector('.starbucks').src = anything;
        }

        alertify.set('notifier', 'position', 'top-right');
        alertify.set('notifier', 'delay', 5);

        loadProducts();     

        // para sa modal add product
        $(document).ready(function () {
            $('#modalContainer').load('modal.html');
        
            // Add event listener for the submit button
            $(document).on('click', '#addProductButton', function () {
                console.log("Submit button clicked"); // Debug statement
        
                // alertify.success("CLICKED");
        
                var formData = new FormData();
                formData.append('productName', $('#productName').val());
                formData.append('productPrice', $('#productPrice').val());
                formData.append('productDescription', $('#productDescription').val());
                formData.append('image', $('#productImageName')[0].files[0]);
        
                console.log("Form data:", formData); // Debug pppppppta ayaw mag function yung button
        
                $.ajax({
                    type: 'POST',
                    url: 'addProduct.php',
                    data: formData,
                    contentType: false,
                    processData: false,
                    beforeSend: function () {
                      
                        $('#addProductButton').prop('disabled', true).html('<i class="fa fa-spinner fa-spin"></i> Submitting...');
                    },
                    success: function (response) {
                        console.log("AJAX request successful"); 
                        console.log("Response:", response); // check response  from server uo xd
        
                        if (response.trim() === 'Product inserted successfully') {
                            alertify.success('Product added successfully');
                            $('#addProduct').modal('hide');
                            setTimeout(function () {
                                location.reload();
                            }, 2000);
                        } else {
                            alertify.error('Failed to add product: ' + response);
                            $('#addProductButton').prop('disabled', false).html('Submit');
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error("AJAX request error:", xhr.responseText); // Debug statement
                        alertify.error('Error: ' + xhr.responseText);
                        $('#addProductButton').prop('disabled', false).html('Submit');
                    }
                });
            });

          $('#modalContainer').load('modal.html');

          $('#total').hide()
          $(".addtocart").click(function () {
            
              var productId = $(this).data("product-id");
              var productName = $(this).data("product-name");
              var productImage = $(this).data("product-image");
              var productDetail = $(this).data("product-detail");
              var productPrice = $(this).data("product-price");

              //ayaw magpakita yung picture sa modal 
              console.log("Product Image URL:", productImage);
              console.log("Product ID:", productId);
              console.log("Product Name:", productName);
              console.log("Product Image:", productImage);
              console.log("Product Detail:", productDetail);
              console.log("Product Price:", productPrice);
              
              $("#modalProduct #fruitname").text(productName);
              $("#modalProduct #fruitprice").text("Php " + productPrice);
              $("#modalProduct #fruitdetail").text(productDetail);
              $("#modalProduct #fruitimage").attr("src", "/3rdyr/starbuckz/products/" + productImage); //kelangan pala yunf directory lols my ghad sayang 30 mins

              //FUnction for Increment Button on MOdal product
              $("#increment").click(function () {
                  let quantity = parseInt($("#quantity").val());
                  quantity += 1; 
                  $("#quantity").val(quantity); 
                  $('#total').show();
                  $('#total').val(productPrice * quantity); 
              });
            
              //FUnction for Decrement Button on MOdal product
              $("#decrement").click(function () {
                  let quantity = parseInt($("#quantity").val());
                  if (quantity > 0) {
                      quantity -= 1; 
                      $("#quantity").val(quantity); 
                      $('#total').show();
                      $('#total').val(productPrice * quantity); 
                  }
              });
            
              $('#close').click(function(){
                $('#quantity').val(0);
                $('#total').hide()

                //mahirap na bug requires modern solution reload para di mag double yung Qt sa modal
                setTimeout(function () {
                    location.reload();
                }, 10);
              });

              $('#buy').click(function () {
                  alertify.success('Item added to cart!');

                  var productId = $("#modalProduct .addtocart").data("product-id");
                  var productPrice = parseFloat($("#modalProduct #total").val());
                  var quantity = parseInt($("#quantity").val());
                  var total = productPrice ;
              
                  // Create an object to represent the cart item
                  var cartItem = {
                      productId: productId,
                      productName: productName,
                      productPrice: productPrice,
                      quantity: quantity,
                      total: total
                  };
              
                  // Store the cart item in localStorage
                  var cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
                  cartItems.push(cartItem);
                  localStorage.setItem("cartItems", JSON.stringify(cartItems));
              
                  // Clear the quantity after adding to cart
                  $("#quantity").val(0);
              
                  // Display updated cart items
                  displayCartItems();
              
                  // Reload the page after a delay (e.g., 2000 milliseconds = 2 seconds)
                  setTimeout(function () {
                      location.reload();
                  }, 2000);
              });
            
              // Function to display cart items
              function displayCartItems() {
                    var cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
                    var cartOutput = "Product Name\tQuantity\tTotal\n";
              }
              
              // Display cart items when the page loads
              displayCartItems();
              
        
          });
        });


        function loadProducts() { 
            $.ajax({
                url: 'fetchProduct.php',
                success: function (data) { 
                    if (data.trim() === '') {
                        $('#content').append('<div><p>NO PRODUCTS AVAILABLE</p></div>');
                    } else {
                        $('#content').append(data);
                    }
                },
                error: function () {
                    $('#content').append('<div><p>Error loading products. Please try again later.</p></div>');
                }
            });
        }
  
  
    </script>
  </body>
</html>
